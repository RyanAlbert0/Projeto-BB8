<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acessar: BB8 Archaeologist</title>
    <style>
        #canvas {
            border: 1px solid #ccc;
            display: block;
            margin: 40px auto;
        }
        .controls {
            width: 400px;
            margin: 10px auto;
            text-align: center;
        }
    </style>
</head>
<body>
    <main>
        <div class="controls" id="controls"></div>
        <canvas id="canvas" width="400" height="300"></canvas>
        <script>
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            // Pontos fixos
            const points = [
                { x: 50, y: 50 },
                { x: 150, y: 80 },
                { x: 250, y: 120 },
                { x: 350, y: 250 },
                { x: 100, y: 200 },
                { x: 300, y: 50 },
                { x: 200, y: 220 },
                { x: 120, y: 30 }
            ];

            // Gera checkboxes para cada ponto
            const controlsDiv = document.getElementById('controls');

            // guarda a ordem em que os pontos foram selecionados
            const selectionOrder = [];

            points.forEach((_, i) => {
                const label = document.createElement('label');
                label.style.marginRight = "10px";
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.className = 'point';
                checkbox.value = i;

                // atualiza a ordem ao marcar/desmarcar
                checkbox.addEventListener('change', () => {
                    const idx = Number(checkbox.value);
                    if (checkbox.checked) {
                        // se já existir, remove para mover para o fim (garante ordem atual)
                        const exist = selectionOrder.indexOf(idx);
                        if (exist !== -1) selectionOrder.splice(exist, 1);
                        selectionOrder.push(idx);
                    } else {
                        const pos = selectionOrder.indexOf(idx);
                        if (pos !== -1) selectionOrder.splice(pos, 1);
                    }
                    draw();
                });

                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(` Ponto ${i+1} `));
                controlsDiv.appendChild(label);
            });

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Desenha pontos
                points.forEach((point, i) => {
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 7, 0, 2 * Math.PI);
                    ctx.fillStyle = ['blue', 'green', 'orange', 'red', 'purple', 'brown'][i % 6];
                    ctx.fill();
                    ctx.font = "bold 14px Arial";
                    ctx.fillStyle = "#222";
                    ctx.fillText(`P${i+1}`, point.x + 10, point.y - 10);
                });

                // Desenha linha na ordem de seleção
                if (selectionOrder.length >= 2) {
                    ctx.beginPath();
                    ctx.moveTo(points[selectionOrder[0]].x, points[selectionOrder[0]].y);
                    for (let i = 1; i < selectionOrder.length; i++) {
                        const p = points[selectionOrder[i]];
                        ctx.lineTo(p.x, p.y);
                    }
                    ctx.strokeStyle = 'black';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }

            // desenha inicial (nenhum selecionado)
            draw();
        </script>
    </main>
</body>
</html>





<!-- https://getbootstrap.com/docs/4.1/components/modal/ -->